# 타임라인 응용과 컷신 구현

게임에서는 무작정 플레이어 시점의 조작 화면만 있지는 않다. 소위 말하는 컷신이라는 전환과정 또는 영상이 있을 수 있다.

물론 외부에서 영상을 만들어서 삽입할수도 있지만 유니티 내부에서 촬영할 수도 있다.

<br>

## 촬영 준비

유니티에서 타임라인 기능을 이용하기 위해서는 패키지의 임포트가 필요하다.

임포트가 완료되었다면, window -> sequance -> timeline 항목을 눌러서 타임라인 창을 열면 타임라인 기능을 사용할 준비를 마칠수 있다.

<br>

### playable directer 컴포넌트

timeline을 재생하기 위해 필요한 컴포넌트로써, 언제 어떤 모드로 타임라인을 재생할 지 결정하여 재생시킬수 있다.

또한, 타임라인을 수정하기 위해서는 해당 컴포넌트에 연결된 타임라인을 수정할 수 있다.

<br>

## timeline의 구성 파라미터

time라인은 사실상 영화 필름이다. 그러나 현실에서는 단순히 촬영한 장면이 담겨있는것과는 다르게, 컴퓨터에서는 어느 카메라의 시점인지, 현재 어느 오브젝트가 움직이고 활성화/비활성화 되어있는지가 작성되어있다.

그러므로 타임라인이 어느 구성요소들로 이루어져있는지 알아야 할 필요성이 있다. 

<br>

### track group

트랙들에 대해서 설명하기 전에 트랙 그룹이라는것이 존재한다.

간단히 말해서 빈 게임 오브젝트 또는 폴더역할이다.

여러개의 기능 트랙들을 하나의 부모로 묶는 역할을 하며, 한번에 자식 트랙들을 활성/비활성화 하는것이 가능하다.

<br>

### cinemachine track

보통은 cinemachine 패키지를 추가하여 같이 사용한다.

cinemachine 패키지가 임포트 되어있다면, cinemachine track을 추가할 수 있으며, 그곳에 촬영지가 아닌 실제 카메라인 cinemachine brain을 연결시키면 해당 트랙을 사용할 수 있게된다.


<hr>

기존에 priority를 조절하여 촬영지 전환을 했던 방법과는 다르게 영상편집처럼 virtual camera를 해당 라인에 드래그하면 촬영 시간등을 조절할 수 있다.

여기서 여러개의 카메라가 겹친다면, 장면간 이동을 부드럽게 만들수도 있다. 

<br>

### activate track

해당 트랙에는 오브젝트를 지정 가능하며, 오브젝트의 active, inactive를 설정 가능하다.

컷씬 상태에서만 보이거나 활성화되어야 하는 오브젝트들이 주로 배치된다.

<br>

### audio track

따로 설명할 것도 없이 소리를 재생하는 트랙이다.

트랙 자체에는 audio source가 필요하며, 굳이 해당 소스에 등록된 클립만 재생해야하는것은 아니고, 우클릭으로 오디오 클립을 따로 추가할 수 있다.

물론 소리가 천천히 커지거나 작아지는 페이드인, 아웃도 설정할 수 있다.[ ease in/out duration ]

<br>

### control track

효과 트랙 즉, 파티클 효과를 넣을 수 있는 트랙이다.

<br>

### animation track

애니메이션을 재생하기 위한 트랙이다.

트랙 자체에는 animator 컴포넌트를 필요로 한다.

**animation controller가 아닌 animator**이다.

다만, animator 컴포넌트에 controller가 등록되어있지 않아도 animator자체만 있으면 상관 없다.

animator를 추가한 이후에는 animation clip을 등록할 수 있으며, 시간에 따라 해당 애니메이션을 재생하게 된다.

<hr>

또는 clip없이 애니메이션을 녹화하는것 또한 가능하다. 즉, 기존에 animation clip을 녹화하여 생성하는것과 같은 원리이다.

**단,** 녹화가 가능한 오브젝트들의 범주는 animator 컴포넌트의 자식 오브젝트들만 포함된다.

<hr>

보통 자주 사용될 것 같은 캐릭터의 이동과 애니메이션은 다음과 같은 순서로 작성된다.

1. animator가 붙어있는 timeline과 같은 오브젝트를 기준으로 animation 트랙을 생성한다.
2. 원하는 캐릭터를 위의 animator가 붙어있는 오브젝트의 자식으로 등록한다.
3. 애니메이션 트랙의 녹화를 이용하여 캐릭터 오브젝트의 **이동** 애니메이션 클립을 만든다.
4. 캐릭터의 애니메이션 출력을 위한 animation 트랙을 새로 생성한다.
5. 새로 만든 animation 트랙에는 자식으로 등록한 캐릭터의 animator를 연결한다.
6. 시간의 경과에 따라 해당 트랙에 캐릭터의 애니메이션 클립을 플레이시킨다.

<br>

### signal track

타임라인이 진행중인 도중에 특정 코드 또는 행동을 하도록 신호를 보낼 필요가 있을 때가 많을 것이다.

굳이 따지자면 애니메이션의 trigger같은 느낌이다.

signal trank을 사용하는 방법은 다음과 같다.
1. signal track에서 add signal emitter항목을 추가한다.
2. emit signal에서 드롭다운을 이용해 기존에 존재하는 signal을 지정하거나 새로운 signal을 만든다.
3. signal을 받아 행동을 할 객체에 signal receiver컴포넌트를 추가한다.
4. 대상이 되는 signal track에 방금 만든 signal receiver를 등록한다.
5. 해당 siganl이 발생할 때 해당 객체에서 실행할 행동을 지정한다.

이제 해당 타이밍에 시그널이 발생할 때마다 연결된 컴포넌트의 행동 / 함수가 실행될 것이다.

<br>

### +) 추가 정보

timeline은 보통 자동으로 임포트되어있지만, smaple을 추가한다면 몇가지 추가 기능을 사용할 수 있다.

텍스트를 띄운다던가 타임라인의 배속조절, 동영상 삽입등을 할수있으니, 샘플 파일도 같이 추가하는것을 추천한다.

<br>